---
/**
 * WeatherIcon Component
 * 
 * Renders weather condition icons based on OpenWeatherMap icon codes.
 * Uses custom SVG icons for better control and performance.
 */

interface Props {
  icon: string; // OpenWeatherMap icon code (e.g., "01d", "10n")
  size?: "sm" | "md" | "lg" | "xl";
  class?: string;
}

const { icon, size = "md", class: className = "" } = Astro.props;

const sizeClasses = {
  sm: "w-8 h-8",
  md: "w-12 h-12",
  lg: "w-24 h-24",
  xl: "w-32 h-32",
};

const sizeClass = sizeClasses[size];

// Map icon codes to visual representations
// For now using emoji as placeholders, will replace with custom SVGs
const iconMap: Record<string, string> = {
  "01d": "â˜€ï¸", // Clear sky day
  "01n": "ğŸŒ™", // Clear sky night
  "02d": "ğŸŒ¤ï¸", // Few clouds day
  "02n": "â˜ï¸", // Few clouds night
  "03d": "â˜ï¸", // Scattered clouds
  "03n": "â˜ï¸",
  "04d": "â˜ï¸", // Broken clouds
  "04n": "â˜ï¸",
  "09d": "ğŸŒ§ï¸", // Shower rain
  "09n": "ğŸŒ§ï¸",
  "10d": "ğŸŒ¦ï¸", // Rain day
  "10n": "ğŸŒ§ï¸", // Rain night
  "11d": "â›ˆï¸", // Thunderstorm
  "11n": "â›ˆï¸",
  "13d": "â„ï¸", // Snow
  "13n": "â„ï¸",
  "50d": "ğŸŒ«ï¸", // Mist
  "50n": "ğŸŒ«ï¸",
};

const displayIcon = iconMap[icon] || "ğŸŒ¡ï¸";
---

<div class:list={[sizeClass, "flex items-center justify-center", className]}>
  <span class="text-4xl" role="img" aria-label="Weather icon">
    {displayIcon}
  </span>
</div>

<style>
  /* Prevent emoji rendering issues */
  span {
    font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  }
</style>
